<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta
    name="description"
    content="The Global Antiquity Society - Discover hidden truths, and practical skills for the modern world."
  />
  <title>The Global Antiquity Society | One-Page Showcase</title>

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Roboto:wght@400;700&display=swap"
    rel="stylesheet"
  />

  <!-- Leaflet.js for Map (if you want to keep the map) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />
  <script
    defer
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  ></script>

  <!-- Inline CSS -->
  <style>
    /*--------------------------------------------------------------
      RESET & ROOT VARIABLES
    --------------------------------------------------------------*/
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary-color: #a63a00;
      --secondary-color: #f2e4ca;
      --background-dark: #1c1c1c;
      --text-light: #f9f9f9;
      --text-dark: #333333;
      --accent-color: #c79b53;
    }

    /*--------------------------------------------------------------
      GLOBAL STYLES
    --------------------------------------------------------------*/
    html {
      scroll-behavior: smooth; /* Smooth scrolling for the entire page */
    }

    body {
      background: url('images/dark-parchment-texture.jpg') no-repeat center center fixed;
      background-size: cover;
      color: var(--text-light);
      font-family: 'Roboto', Arial, Helvetica, sans-serif;
      line-height: 1.6;
      overflow-x: hidden; /* Prevent horizontal scroll if content extends */
    }

    img {
      max-width: 100%;
      height: auto;
      display: block;
    }

    a {
      color: var(--primary-color);
      text-decoration: none;
    }

    a:hover {
      opacity: 0.8;
    }

    h1, h2, h3 {
      font-family: 'Cinzel', serif;
      margin-bottom: 0.5rem;
    }

    p {
      margin-bottom: 1rem;
    }

    /*--------------------------------------------------------------
      PRELOADER
    --------------------------------------------------------------*/
    #preloader {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 9999;
      width: 100%;
      height: 100%;
      background: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .spinner {
      width: 50px;
      height: 50px;
      border: 6px solid #ccc;
      border-top-color: #000;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /*--------------------------------------------------------------
      POPUP MODAL
    --------------------------------------------------------------*/
    .popup-overlay {
      position: fixed;
      z-index: 10000;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    .popup-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .popup-content {
      background: var(--background-dark);
      border: 2px solid var(--primary-color);
      border-radius: 8px;
      padding: 2rem;
      max-width: 600px;
      width: 90%;
      text-align: center;
      position: relative;
    }

    .popup-content h2 {
      margin-bottom: 1rem;
      font-size: 1.5rem;
    }
    .popup-content p {
      margin-bottom: 1.5rem;
    }
    .popup-content input[type="email"] {
      width: 80%;
      padding: 0.5rem;
      margin-bottom: 1rem;
      border: 1px solid var(--primary-color);
      border-radius: 4px;
    }
    .popup-content button {
      background: var(--primary-color);
      color: var(--text-light);
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .popup-content button:hover {
      background: var(--accent-color);
    }
    .close-popup {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background: none;
      border: none;
      color: var(--text-light);
      font-size: 1.2rem;
      cursor: pointer;
    }

    /*--------------------------------------------------------------
      HERO SECTION
    --------------------------------------------------------------*/
    .hero {
      position: relative;
      min-height: 70vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 2rem;
      color: var(--text-light);
    }

    .hero-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.4);
      pointer-events: none;
      z-index: 0;
    }

    .hero-text {
      position: relative; /* ensures it's above overlay */
      z-index: 1;
      max-width: 800px;
      padding: 1rem;
    }

    .hero-text h1 {
      font-size: 2.5rem;
      text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
      margin-bottom: 1rem;
    }

    .hero-text p {
      font-size: 1.2rem;
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
    }

    /* Section Divider */
    .section-divider {
      margin: 2rem 0;
      border: none;
      height: 2px;
      background: rgba(255, 255, 255, 0.2);
    }

    /*--------------------------------------------------------------
      TOP SECTIONS (About Us, Discord, Form Your Own Crew)
    --------------------------------------------------------------*/
    .content-section {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem;
      background-color: rgba(0, 0, 0, 0.6);
      border-radius: 8px;
      margin-bottom: 2rem;
    }
    .content-section h2 {
      text-align: center;
      margin-bottom: 1rem;
      font-size: 2rem;
    }
    .content-section p {
      margin-bottom: 1rem;
      line-height: 1.6;
    }
    .content-section form {
      display: flex;
      flex-direction: column;
      max-width: 500px;
      margin: 1rem auto 0;
    }
    .content-section label {
      margin-bottom: 0.5rem;
      font-weight: bold;
    }
    .content-section input[type="text"],
    .content-section input[type="email"],
    .content-section textarea {
      padding: 0.5rem;
      margin-bottom: 1rem;
      border: 1px solid var(--primary-color);
      border-radius: 4px;
      font-family: 'Roboto', sans-serif;
    }
    .content-section textarea {
      resize: vertical;
    }
    .content-section button[type="submit"] {
      background: var(--primary-color);
      color: var(--text-light);
      border: none;
      border-radius: 4px;
      padding: 0.5rem 1rem;
      cursor: pointer;
    }
    .content-section button[type="submit"]:hover {
      background: var(--accent-color);
    }

    /*--------------------------------------------------------------
      IMPORTANT LINKS SECTION & DROPDOWNS
    --------------------------------------------------------------*/
    .important-links {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }

    .important-links h2 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 1rem;
    }

    /* Only place arrows on the main headings within .important-links (not nested card headings) */
    .important-links > h3 {
      cursor: pointer;
      background-color: var(--primary-color);
      color: var(--text-light);
      padding: 1rem;
      border-radius: 5px;
      margin-bottom: 0.5rem;
      text-align: center;
      transition: background-color 0.3s ease-in-out;
      position: relative; /* for arrow icon */
    }

    .important-links > h3:hover {
      background-color: var(--accent-color);
    }

    /* Add caret (▼) only to top-level h3 inside .important-links */
    .important-links > h3::after {
      content: "▼";
      position: absolute;
      right: 1.5rem;
      top: 50%;
      transform: translateY(-50%);
      transition: transform 0.3s;
      font-size: 1rem;
    }

    /* Rotate arrow when open */
    .important-links > h3.open::after {
      transform: translateY(-50%) rotate(180deg);
    }

    /* Dropdown Container */
    .important-links .dropdown-content {
      display: none; /* hidden by default */
      padding-left: 1rem;
      border-left: 2px solid var(--primary-color);
      margin-bottom: 1rem;
      transition: all 0.3s ease-in-out;

      /* We want the knowledge cards side by side on desktop */
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: flex-start; /* align left so there's no big space in middle */
    }

    /*--------------------------------------------------------------
      KNOWLEDGE CARDS
    --------------------------------------------------------------*/
    .knowledge-card {
      max-width: 300px; /* set a max width */
      width: 100%;
      perspective: 1000px;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      /* Remove fixed height to allow text to expand as needed */
      min-height: 200px;
      overflow: hidden; /* just in case */
    }

    .knowledge-card:hover {
      transform: scale(1.03);
      box-shadow: 0 12px 18px rgba(0, 0, 0, 0.3);
    }

    .knowledge-card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 0.6s ease;
    }

    /* Flip on card click OR .flipped class. 
       If you only want flipping on click, remove :hover below.
    */
    .knowledge-card:hover .knowledge-card-inner,
    .knowledge-card-inner.flipped {
      transform: rotateY(180deg);
    }

    .knowledge-card-front,
    .knowledge-card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      padding: 1rem;
      text-align: center;
      box-sizing: border-box;
    }

    .knowledge-card-front {
      background: var(--primary-color);
      color: var(--text-light);
    }

    .knowledge-card-back {
      background: var(--background-dark);
      color: var(--text-light);
      transform: rotateY(180deg);
      /* ensure no hidden arrows or clickable heading states here */
    }

    .knowledge-card h3 {
      margin-bottom: 0.5rem;
      pointer-events: none; /* so it doesn't behave like a clickable link */
    }

    .knowledge-card p {
      margin-bottom: 1rem;
    }

    .knowledge-card a {
      margin-top: auto;
      padding: 0.5rem 1rem;
      background: var(--primary-color);
      color: var(--text-light);
      border-radius: 4px;
      text-decoration: none;
      display: inline-block;
    }

    .knowledge-card a:hover {
      background: #9b3702;
    }

    /* Dynamic preview images */
    .dynamic-preview {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 4px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
      pointer-events: none; /* make sure the image itself isn't clickable */
    }

    .dynamic-preview:hover {
      transform: scale(1.05);
    }

    /*--------------------------------------------------------------
      MAP SECTION (optional)
    --------------------------------------------------------------*/
    .map-section {
      max-width: 1000px;
      margin: 2rem auto;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
      background-color: rgba(0, 0, 0, 0.7);
    }

    .map-section h2 {
      text-align: center;
      margin-bottom: 1rem;
    }

    #map {
      width: 100%;
      height: 400px;
      margin-top: 20px;
      border-radius: 8px;
    }

    /*--------------------------------------------------------------
      FOOTER
    --------------------------------------------------------------*/
    footer.contact-block {
      background-color: var(--background-dark);
      text-align: center;
      padding: 2rem 1rem;
    }

    .contact-info {
      margin-bottom: 1rem;
    }

    .contact-info p a {
      color: var(--primary-color);
      text-decoration: underline;
    }

    .footer-copy {
      font-size: 0.9rem;
      color: #777;
    }

    /*--------------------------------------------------------------
      MEDIA QUERIES
    --------------------------------------------------------------*/
    @media (max-width: 768px) {
      .hero-text h1 {
        font-size: 2rem;
      }
      .hero-text p {
        font-size: 1rem;
      }
    }

    @media (min-width: 992px) {
      .knowledge-card {
        flex: 0 0 calc(33.333% - 1rem);
      }
    }
  </style>
</head>
<body>
  <!-- ==============================
       PRELOADER
  =============================== -->
  <div id="preloader">
    <div class="spinner"></div>
  </div>

  <!-- ==============================
       POPUP MODAL (Hidden by default)
  =============================== -->
  <div class="popup-overlay" id="popupOverlay">
    <div class="popup-content">
      <button class="close-popup" id="closePopup" aria-label="Close popup">&times;</button>
      <h2>Hey there, rebel!</h2>
      <p>
        Tired of the endless internet rabbit holes and corporate BS? We hear you.
        Ready to flip the script? Learn how to fix things, trade killer ideas, and
        build a real local community—no mindless scrolling or pinging app notifications required.
      </p>
      <p>
        Join us and grab your free guide. It’s time to kick dependency to the curb
        and shape life on your own terms. Drop your email below and step into a more
        authentic, self-driven world!
      </p>
      <input type="email" placeholder="Your Email Here..." />
      <br />
      <button>Count Me In</button>
    </div>
  </div>

  <!-- ==============================
       HERO SECTION
  =============================== -->
  <section class="hero">
    <div class="hero-overlay"></div>
    <div class="hero-text">
      <h1>Embark on the Adventure of Knowledge</h1>
      <p>Explore hidden truths and practical skills for the modern world, all in one place.</p>
    </div>
  </section>

  <hr class="section-divider" />

  <!-- ==============================
       ABOUT US
  =============================== -->
  <section class="content-section" id="aboutUs">
    <h2>About Us</h2>
    <p>
      The Global Antiquity Society (GAS) is a collective intelligence network on a
      mission to rebuild genuine trust among people. We look back to a time when
      communities grew naturally and everyone knew each other—when life was about
      real connections, and extended families supported each other under one roof,
      no insurance policies or glossy marketing needed.
    </p>
    <p>
      Globalization has scattered us—some of us left in search of opportunity, others
      driven by power or greed, and some simply disillusioned. As a result, our
      families and communities feel more fragmented than ever. But all is not lost.
      At GAS, we’re about rediscovering that raw, unfiltered sense of unity: hanging
      out, sharing ideas, helping out, having fun, and forging genuine bonds.
    </p>
    <p>
      Join us in reviving the timeless spirit of connection and rediscover what it’s
      like to live on your own terms.
    </p>
  </section>

  <!-- ==============================
       DISCORD
  =============================== -->
  <section class="content-section" id="discordSection">
    <h2>Discord</h2>
    <p>
      <strong>Set Sail With Our Crew!</strong><br />
      Ready to take the next step? Join Delray Beach’s very own GAS (Global Antiquity
      Society) Discord—a crew of free-thinkers mining the past to craft an inspiring future.
    </p>
    <p>
      Come aboard and discover upcoming workshops, events, and more as we chart a new course together!
    </p>
    <!-- You might include a direct Discord invite link here if you have one -->
    <button>Join Our Discord</button>
  </section>

  <!-- ==============================
       FORM YOUR OWN CREW
  =============================== -->
  <section class="content-section" id="formCrew">
    <h2>Form Your Own Crew</h2>
    <p>
      Thinking of starting your own GAS crew? We’d love to hear about it. Share your name,
      email, and a quick note about your vision—whether it’s building a community garden,
      launching a makerspace, or starting any initiative that brings people together.
      Let’s chart your course together.
    </p>
    <form>
      <label for="crewName">Your Name:</label>
      <input type="text" id="crewName" name="crewName" placeholder="Enter your name" />

      <label for="crewEmail">Your Email:</label>
      <input type="email" id="crewEmail" name="crewEmail" placeholder="Enter your email" />

      <label for="crewMessage">Why Do You Want to Build a Community?</label>
      <textarea id="crewMessage" name="crewMessage" rows="4" placeholder="Tell us more..."></textarea>

      <button type="submit">Submit &amp; Set Sail</button>
    </form>
    <p style="margin-top:1rem;">
      Step away from the static. Embrace the adventure—and help shape a future built
      on authenticity and shared learning!
    </p>
  </section>

  <hr class="section-divider" />

  <!-- ==============================
       IMPORTANT LINKS
  =============================== -->
  <section class="important-links" id="linksSection">
    <h2>Important Links</h2>

    <!-- Hidden Histories -->
    <h3>Hidden Histories</h3>
    <div class="dropdown-content" id="hidden-histories">
      <!-- Example Knowledge Card -->
      <div class="knowledge-card">
        <div class="knowledge-card-inner">
          <div class="knowledge-card-front">
            <img
              src="images/fallback.jpg"
              alt="Library of Congress"
              class="dynamic-preview"
              loading="lazy"
              data-url="https://www.loc.gov/"
            />
          </div>
          <div class="knowledge-card-back">
            <h3>Library of Congress</h3>
            <p>The largest library in the world with millions of items.</p>
            <a href="https://www.loc.gov/" target="_blank" rel="noopener noreferrer">
              Visit Website
            </a>
          </div>
        </div>
      </div>

      <!-- Another Knowledge Card -->
      <div class="knowledge-card">
        <div class="knowledge-card-inner">
          <div class="knowledge-card-front">
            <img
              src="images/fallback.jpg"
              alt="UNESCO World Heritage"
              class="dynamic-preview"
              loading="lazy"
              data-url="https://whc.unesco.org/"
            />
          </div>
          <div class="knowledge-card-back">
            <h3>UNESCO World Heritage</h3>
            <p>Discover cultural and natural heritage sites around the globe.</p>
            <a href="https://whc.unesco.org/" target="_blank" rel="noopener noreferrer">
              Visit Website
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Manuals -->
    <h3>Manuals</h3>
    <div class="dropdown-content" id="manuals">
      <div class="knowledge-card">
        <div class="knowledge-card-inner">
          <div class="knowledge-card-front">
            <img
              src="images/fallback.jpg"
              alt="FMHY"
              class="dynamic-preview"
              loading="lazy"
              data-url="https://fmhy.net/"
            />
          </div>
          <div class="knowledge-card-back">
            <h3>FMHY</h3>
            <p>A massive, crowdsourced library of modern “how-to” resources.</p>
            <a href="https://fmhy.net/" target="_blank" rel="noopener noreferrer">
              Visit Website
            </a>
          </div>
        </div>
      </div>
      <div class="knowledge-card">
        <div class="knowledge-card-inner">
          <div class="knowledge-card-front">
            <img
              src="images/fallback.jpg"
              alt="Alternative To"
              class="dynamic-preview"
              loading="lazy"
              data-url="https://alternativeto.net/"
            />
          </div>
          <div class="knowledge-card-back">
            <h3>AlternativeTo</h3>
            <p>Discover software and app alternatives for just about anything.</p>
            <a href="https://alternativeto.net/" target="_blank" rel="noopener noreferrer">
              Visit Website
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Repositories -->
    <h3>Repositories</h3>
    <div class="dropdown-content" id="repositories">
      <div class="knowledge-card">
        <div class="knowledge-card-inner">
          <div class="knowledge-card-front">
            <img
              src="images/fallback.jpg"
              alt="Free For Dev"
              class="dynamic-preview"
              loading="lazy"
              data-url="https://github.com/ripienaar/free-for-dev"
            />
          </div>
          <div class="knowledge-card-back">
            <h3>Free For Dev</h3>
            <p>A curated list of free services and resources for developers.</p>
            <a
              href="https://github.com/ripienaar/free-for-dev"
              target="_blank"
              rel="noopener noreferrer"
            >
              Visit Website
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Independent Chronicles -->
    <h3>Independent Chronicles</h3>
    <div class="dropdown-content" id="independent-chronicles">
      <div class="knowledge-card">
        <div class="knowledge-card-inner">
          <div class="knowledge-card-front">
            <img
              src="images/fallback.jpg"
              alt="CuriosityStream"
              class="dynamic-preview"
              loading="lazy"
              data-url="https://curiositystream.com/"
            />
          </div>
          <div class="knowledge-card-back">
            <h3>CuriosityStream</h3>
            <p>Documentary streaming service with a wide range of educational topics.</p>
            <a
              href="https://curiositystream.com/"
              target="_blank"
              rel="noopener noreferrer"
            >
              Visit Website
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <hr class="section-divider" />

  <!-- ==============================
       OPTIONAL: MAP SECTION
  =============================== -->
  <section class="map-section">
    <h2>Interactive Event Map</h2>
    <p style="text-align: center; color: #fff;">Find events and meetups happening near you.</p>
    <div id="map" aria-label="Interactive map for events"></div>
  </section>

  <hr class="section-divider" />

  <!-- ==============================
       FOOTER
  =============================== -->
  <footer class="contact-block">
    <div class="contact-info">
      <h3>Contact Us</h3>
      <p>123 Ancient Road, Knowledge City, Earth</p>
      <p>
        Email:
        <a
          href="mailto:info@globalantiquity.org"
          aria-label="Send an email to info@globalantiquity.org"
        >info@globalantiquity.org</a>
      </p>
      <!-- Decorative compass (optional) -->
      <img
        src="images/compass-rose.png"
        alt="Decorative compass rose"
        style="width: 50px; margin-top: 10px;"
      />
    </div>
    <p class="footer-copy">
      &copy; 2025 The Global Antiquity Society. All rights reserved.
    </p>
  </footer>

  <!-- ==============================
       MAIN SCRIPT
  =============================== -->
  <script>
    /*--------------------------------------------------------------
      PRELOADER LOGIC
    --------------------------------------------------------------*/
    window.addEventListener("load", () => {
      const preloader = document.getElementById("preloader");
      if (preloader) {
        preloader.style.display = "none";
      }
      // Fallback: Hide after 5s if 'load' doesn't fire
      setTimeout(() => {
        if (preloader) preloader.style.display = "none";
      }, 5000);
    });

    /*--------------------------------------------------------------
      DOMContentLoaded
    --------------------------------------------------------------*/
    document.addEventListener("DOMContentLoaded", () => {
      // 1. Show popup once page loads (you can add logic to only show once if desired)
      const popupOverlay = document.getElementById('popupOverlay');
      const closePopupBtn = document.getElementById('closePopup');
      if (popupOverlay) {
        // Show it
        popupOverlay.classList.add('active');

        // Close on button click
        closePopupBtn.addEventListener('click', () => {
          popupOverlay.classList.remove('active');
        });
      }

      // 2. Toggle dropdown for each subsection
      const headings = document.querySelectorAll(".important-links > h3");
      headings.forEach((heading) => {
        heading.addEventListener("click", () => {
          const nextContent = heading.nextElementSibling;
          if (nextContent && nextContent.classList.contains("dropdown-content")) {
            const isOpen = nextContent.style.display === "block";
            nextContent.style.display = isOpen ? "none" : "block";
            heading.classList.toggle("open", !isOpen);
          }
        });
      });

      // 3. Lazy Load Dynamic Previews with IntersectionObserver
      const previewImages = document.querySelectorAll(".dynamic-preview");
      if ("IntersectionObserver" in window) {
        const observer = new IntersectionObserver((entries, obs) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const img = entry.target;
              const card = img.closest(".knowledge-card");
              // Use data-url if provided, or fallback to any link in the card
              const link = img.dataset.url || card?.querySelector("a")?.href;
              if (link) {
                img.src = `https://api.microlink.io/?url=${link}&screenshot=true&embed=screenshot.url`;
                img.onerror = () => {
                  img.src = "images/fallback.jpg";
                };
              }
              obs.unobserve(img);
            }
          });
        }, { threshold: 0.1 });
        previewImages.forEach((img) => observer.observe(img));
      } else {
        // Fallback: load all previews at once
        previewImages.forEach((img, index) => {
          const card = img.closest(".knowledge-card");
          const link = img.dataset.url || card?.querySelector("a")?.href;
          if (link) {
            setTimeout(() => {
              img.src = `https://api.microlink.io/?url=${link}&screenshot=true&embed=screenshot.url`;
              img.onerror = () => {
                img.src = "images/fallback.jpg";
              };
            }, index * 50);
          }
        });
      }

      // 4. Flip cards on click/tap (helpful on touch devices)
      const knowledgeCards = document.querySelectorAll(".knowledge-card");
      knowledgeCards.forEach((card) => {
        card.addEventListener("click", () => {
          const cardInner = card.querySelector(".knowledge-card-inner");
          if (cardInner) cardInner.classList.toggle("flipped");
        });
      });

      // Close any flipped card if clicked outside
      document.addEventListener("click", (event) => {
        knowledgeCards.forEach((card) => {
          const cardInner = card.querySelector(".knowledge-card-inner");
          if (
            cardInner &&
            cardInner.classList.contains("flipped") &&
            !card.contains(event.target)
          ) {
            cardInner.classList.remove("flipped");
          }
        });
      });

      // 5. Initialize Leaflet Map (if keeping map section)
      if (typeof L !== "undefined" && document.getElementById("map")) {
        const map = L.map("map").setView([26.4615, -80.0728], 13);
        L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png", {
          attribution:
            "&copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> "
            + "contributors &copy; <a href='https://carto.com/'>CARTO</a>",
          subdomains: "abcd",
          maxZoom: 19,
        }).addTo(map);

        // Optional custom marker
        const customIcon = L.icon({
          iconUrl: "images/custom-marker.png", /* Replace with your marker image */
          iconSize: [38, 38],
          iconAnchor: [19, 38],
          popupAnchor: [0, -38],
        });

        // Example marker
        L.marker([26.4615, -80.0728], { icon: customIcon })
          .addTo(map)
          .bindPopup("<b>Community Event:</b> Beach Cleanup<br><b>Date:</b> Jan 15, 10 AM")
          .openPopup();

        // Move zoom controls if desired
        L.control.zoom({ position: "bottomright" }).addTo(map);

        // Keep map responsive
        window.addEventListener("resize", () => {
          map.invalidateSize();
        });
      }
    });
  </script>
</body>
</html>
