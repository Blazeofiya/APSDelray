<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta
    name="description"
    content="The Global Antiquity Society - Discover hidden truths, and practical skills for the modern world."
  />
  <title>The Global Antiquity Society | One-Page Showcase</title>

  <!-- Google Fonts (Cinzel for headings, Roboto for body) -->
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Roboto:wght@400;700&display=swap"
    rel="stylesheet"
  />

  <!-- Leaflet.js for Map (if you keep the map) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />
  <script
    defer
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  ></script>

  <!-- GSAP + ScrollTrigger (for the book animation) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <style>
    /*--------------------------------------------------------------
      RESET & ROOT VARIABLES
    --------------------------------------------------------------*/
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    :root {
      --primary-color: #a63a00;
      --secondary-color: #f2e4ca;
      --background-dark: #1c1c1c;
      --text-light: #f9f9f9;
      --text-dark: #333333;
      --accent-color: #c79b53;
    }

    /*--------------------------------------------------------------
      GLOBAL STYLES
    --------------------------------------------------------------*/
    html {
      scroll-behavior: smooth;
    }
    body {
      font-family: 'Roboto', Arial, Helvetica, sans-serif;
      color: var(--text-light);
      overflow-x: hidden;
      line-height: 1.6;
      /* The main background (dark-parchment) is applied AFTER the pinned container finishes */
      background: url('images/dark-parchment-texture.jpg') no-repeat center center fixed;
      background-size: cover;
    }
    img {
      max-width: 100%;
      height: auto;
      display: block;
    }
    a {
      color: var(--primary-color);
      text-decoration: none;
    }
    a:hover {
      opacity: 0.8;
    }
    h1, h2, h3 {
      font-family: 'Cinzel', serif;
      margin-bottom: 0.5rem;
    }
    p {
      margin-bottom: 1rem;
    }

    /*--------------------------------------------------------------
      TOP BAR (Logo + Title)
    --------------------------------------------------------------*/
    .top-bar {
      width: 100%;
      background: rgba(0,0,0,0.8);
      color: #fff;
      display: flex;
      align-items: center;
      padding: 0.5rem 1rem;
      position: relative;
      z-index: 9999;
    }
    .top-bar img {
      width: 40px;
      height: auto;
      margin-right: 1rem;
    }
    .top-bar h1 {
      font-family: 'Cinzel', serif;
      font-size: 1.5rem;
      letter-spacing: 1px;
    }

    /*--------------------------------------------------------------
      PRELOADER
    --------------------------------------------------------------*/
    #preloader {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 9998;
      width: 100%;
      height: 100%;
      background: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .spinner {
      width: 50px;
      height: 50px;
      border: 6px solid #ccc;
      border-top-color: #000;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /*--------------------------------------------------------------
      POPUP MODAL
    --------------------------------------------------------------*/
    .popup-overlay {
      position: fixed;
      z-index: 10000;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    .popup-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    .popup-content {
      background: var(--background-dark);
      border: 2px solid var(--primary-color);
      border-radius: 8px;
      padding: 2rem;
      max-width: 600px;
      width: 90%;
      text-align: center;
      position: relative;
    }
    .popup-content h2 {
      margin-bottom: 1rem;
      font-size: 1.5rem;
    }
    .popup-content p {
      margin-bottom: 1.5rem;
    }
    .popup-content input[type="email"] {
      width: 80%;
      padding: 0.5rem;
      margin-bottom: 1rem;
      border: 1px solid var(--primary-color);
      border-radius: 4px;
    }
    .popup-content button {
      background: var(--primary-color);
      color: var(--text-light);
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .popup-content button:hover {
      background: var(--accent-color);
    }
    .close-popup {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background: none;
      border: none;
      color: var(--text-light);
      font-size: 1.2rem;
      cursor: pointer;
    }

    /*--------------------------------------------------------------
      PINNED BOOK CONTAINER (Black BG)
    --------------------------------------------------------------*/
    .pinned-book-section {
      position: relative;
      width: 100%;
      height: 100vh;
      background: #000; /* black background so about section won't show behind */
      /* We will pin this section in place for the book animation */
      overflow: hidden;
    }

    .book-animation-container {
      width: 100%;
      height: 100%;
      position: relative;
    }

    /* ========== CLOSED BOOK (5.5"x8.5" ~ ratio 0.647) ========== */
    #bookClosed {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      aspect-ratio: 0.647;  /* ~ (5.5 / 8.5) */
      max-width: 25vw;      /* Adjust as needed, or use px */
      height: auto;
    }

    /* ========== OPEN BOOK (11"x8.5" ratio ~1.294) ========== */
    #bookOpen {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      aspect-ratio: 1.294;  /* ~ (11 / 8.5) => 2 pages wide */
      max-width: 50vw;      /* bigger since it's open (two pages) */
      height: auto;
      opacity: 0;           /* initially hidden */
    }

    /* Overlays on the open book for left & right "pages" */
    .book-page {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 50%;     /* each page is half of the open book width */
      height: 60%;    /* approximate height, adjust as needed */
      background: rgba(255,255,255,0.7);
      border: 1px solid #999;
      color: var(--text-dark);
      padding: 1rem;
      font-family: 'Cinzel', serif;
      overflow: auto;
      opacity: 0;    /* hidden until we fade in the pages */
      pointer-events: none;
    }
    .book-page h2 {
      margin-bottom: 0.5rem;
      font-size: 1.2rem;
      text-align: center;
    }
    .book-page a {
      display: block;
      margin-bottom: 0.5rem;
      font-size: 1rem;
      color: var(--text-dark);
      text-decoration: none;
      text-align: left;
    }
    .book-page a:hover {
      text-decoration: underline;
    }

    /* Left page (page 1) -> position left half of open book */
    .book-page-left {
      left: 25%; /* (50% of parent's width / 2) => 25% offset from center */
    }
    /* Right page (page 2) -> position right half */
    .book-page-right {
      right: 25%;
    }

    /* We'll further handle the x-translation in JS or we can do top & left more precisely if needed */

    /* Section Divider */
    .section-divider {
      margin: 2rem 0;
      border: none;
      height: 2px;
      background: rgba(255, 255, 255, 0.2);
    }

    /*--------------------------------------------------------------
      CONTENT SECTIONS (About, Discord, Crew, Map, Footer)
      These are revealed AFTER pinned book container.
    --------------------------------------------------------------*/
    .content-section {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem;
      background-color: rgba(0, 0, 0, 0.6);
      border-radius: 8px;
      margin-bottom: 2rem;
    }
    .content-section h2 {
      text-align: center;
      margin-bottom: 1rem;
      font-size: 2rem;
      font-family: 'Cinzel', serif;
    }
    .content-section p {
      margin-bottom: 1rem;
      line-height: 1.6;
    }
    .content-section form {
      display: flex;
      flex-direction: column;
      max-width: 500px;
      margin: 1rem auto 0;
    }
    .content-section label {
      margin-bottom: 0.5rem;
      font-weight: bold;
    }
    .content-section input[type="text"],
    .content-section input[type="email"],
    .content-section textarea {
      padding: 0.5rem;
      margin-bottom: 1rem;
      border: 1px solid var(--primary-color);
      border-radius: 4px;
      font-family: 'Roboto', sans-serif;
    }
    .content-section textarea {
      resize: vertical;
    }
    .content-section button[type="submit"] {
      background: var(--primary-color);
      color: var(--text-light);
      border: none;
      border-radius: 4px;
      padding: 0.5rem 1rem;
      cursor: pointer;
    }
    .content-section button[type="submit"]:hover {
      background: var(--accent-color);
    }

    /* MAP SECTION */
    .map-section {
      max-width: 1000px;
      margin: 2rem auto;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
      background-color: rgba(0, 0, 0, 0.7);
    }
    .map-section h2 {
      text-align: center;
      margin-bottom: 1rem;
      font-family: 'Cinzel', serif;
    }
    #map {
      width: 100%;
      height: 400px;
      margin-top: 20px;
      border-radius: 8px;
    }

    /* FOOTER */
    footer.contact-block {
      background-color: var(--background-dark);
      text-align: center;
      padding: 2rem 1rem;
    }
    .contact-info {
      margin-bottom: 1rem;
    }
    .contact-info p a {
      color: var(--primary-color);
      text-decoration: underline;
    }
    .footer-copy {
      font-size: 0.9rem;
      color: #777;
    }

    /* MEDIA QUERIES */
    @media (max-width: 768px) {
      .top-bar h1 {
        font-size: 1.2rem;
      }
      #bookClosed, #bookOpen {
        max-width: 60vw;  /* smaller for mobile */
      }
      .book-page {
        width: 40%;
        font-size: 0.9rem;
      }
      .book-page h2 {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <!-- ============================
       TOP BAR (Logo + Title)
  ============================ -->
  <div class="top-bar">
    <img src="logo.png" alt="Placeholder Logo" />
    <h1>Global Antiquity Society</h1>
  </div>

  <!-- ============================
       PRELOADER
  ============================ -->
  <div id="preloader">
    <div class="spinner"></div>
  </div>

  <!-- ============================
       POPUP MODAL
  ============================ -->
  <div class="popup-overlay" id="popupOverlay">
    <div class="popup-content">
      <button class="close-popup" id="closePopup" aria-label="Close popup">&times;</button>
      <h2>Hey there, rebel!</h2>
      <p>
        Tired of the endless internet rabbit holes and corporate BS? We hear you.
        Ready to flip the script? Learn how to fix things, trade killer ideas, and
        build a real local community—no mindless scrolling or pinging app notifications required.
      </p>
      <p>
        Join us and grab your free guide. It’s time to kick dependency to the curb
        and shape life on your own terms. Drop your email below and step into a more
        authentic, self-driven world!
      </p>
      <input type="email" placeholder="Your Email Here..." />
      <br />
      <button>Count Me In</button>
    </div>
  </div>

  <!-- ============================
       PINNED BOOK SECTION
       (Black background)
  ============================ -->
  <section class="pinned-book-section" id="pinnedBookSection">
    <div class="book-animation-container" id="bookAnimation">
      <!-- CLOSED BOOK -->
      <img
        src="images/book-closed.png"
        alt="Closed Book (5.5 x 8.5)"
        id="bookClosed"
      />

      <!-- OPEN BOOK -->
      <img
        src="images/book-open.png"
        alt="Open Book (11 x 8.5)"
        id="bookOpen"
      />

      <!-- Overlays for left and right "pages" on the open book -->
      <div class="book-page book-page-left" id="leftPage">
        <!-- Left page content / Table of Contents Part 1 -->
        <h2>Table of Contents (Page 1)</h2>
        <a href="https://www.loc.gov/" target="_blank" rel="noopener noreferrer">Library of Congress</a>
        <a href="https://whc.unesco.org/" target="_blank" rel="noopener noreferrer">UNESCO</a>
        <a href="https://fmhy.net/" target="_blank" rel="noopener noreferrer">FMHY</a>
      </div>

      <div class="book-page book-page-right" id="rightPage">
        <!-- Right page content / Table of Contents Part 2 -->
        <h2>Table of Contents (Page 2)</h2>
        <a href="https://alternativeto.net/" target="_blank" rel="noopener noreferrer">AlternativeTo</a>
        <a href="https://github.com/ripienaar/free-for-dev" target="_blank" rel="noopener noreferrer">Free For Dev</a>
        <a href="https://curiositystream.com/" target="_blank" rel="noopener noreferrer">CuriosityStream</a>
      </div>
    </div>
  </section>

  <!-- ============================
       REST OF THE PAGE
       (Dark Parchment Background)
  ============================ -->

  <hr class="section-divider" />

  <!-- ABOUT US -->
  <section class="content-section" id="aboutUs">
    <h2>About Us</h2>
    <p>
      The Global Antiquity Society (GAS) is a collective intelligence network on a
      mission to rebuild genuine trust among people. We look back to a time when
      communities grew naturally and everyone knew each other—when life was about
      real connections, and extended families supported each other under one roof,
      no insurance policies or glossy marketing needed.
    </p>
    <p>
      Globalization has scattered us—some of us left in search of opportunity, others
      driven by power or greed, and some simply disillusioned. As a result, our
      families and communities feel more fragmented than ever. But all is not lost.
      At GAS, we’re about rediscovering that raw, unfiltered sense of unity: hanging
      out, sharing ideas, helping out, having fun, and forging genuine bonds.
    </p>
    <p>
      Join us in reviving the timeless spirit of connection and rediscover what it’s
      like to live on your own terms.
    </p>
  </section>

  <!-- DISCORD -->
  <section class="content-section" id="discordSection">
    <h2>Discord</h2>
    <p>
      <strong>Set Sail With Our Crew!</strong><br />
      Ready to take the next step? Join Delray Beach’s very own GAS (Global Antiquity
      Society) Discord—a crew of free-thinkers mining the past to craft an inspiring future.
    </p>
    <p>
      Come aboard and discover upcoming workshops, events, and more as we chart a new course together!
    </p>
    <button>Join Our Discord</button>
  </section>

  <!-- FORM YOUR OWN CREW -->
  <section class="content-section" id="formCrew">
    <h2>Form Your Own Crew</h2>
    <p>
      Thinking of starting your own GAS crew? We’d love to hear about it. Share your name,
      email, and a quick note about your vision—whether it’s building a community garden,
      launching a makerspace, or starting any initiative that brings people together.
      Let’s chart your course together.
    </p>
    <form>
      <label for="crewName">Your Name:</label>
      <input type="text" id="crewName" name="crewName" placeholder="Enter your name" />

      <label for="crewEmail">Your Email:</label>
      <input type="email" id="crewEmail" name="crewEmail" placeholder="Enter your email" />

      <label for="crewMessage">Why Do You Want to Build a Community?</label>
      <textarea id="crewMessage" name="crewMessage" rows="4" placeholder="Tell us more..."></textarea>

      <button type="submit">Submit &amp; Set Sail</button>
    </form>
    <p style="margin-top:1rem;">
      Step away from the static. Embrace the adventure—and help shape a future built
      on authenticity and shared learning!
    </p>
  </section>

  <hr class="section-divider" />

  <!-- MAP SECTION -->
  <section class="map-section">
    <h2>Interactive Event Map</h2>
    <p style="text-align: center; color: #fff;">Find events and meetups happening near you.</p>
    <div id="map" aria-label="Interactive map for events"></div>
  </section>

  <hr class="section-divider" />

  <!-- FOOTER -->
  <footer class="contact-block">
    <div class="contact-info">
      <h3>Contact Us</h3>
      <p>123 Ancient Road, Knowledge City, Earth</p>
      <p>
        Email:
        <a
          href="mailto:info@globalantiquity.org"
          aria-label="Send an email to info@globalantiquity.org"
        >info@globalantiquity.org</a>
      </p>
      <!-- Decorative compass (optional) -->
      <img
        src="images/compass-rose.png"
        alt="Decorative compass rose"
        style="width: 50px; margin-top: 10px;"
      />
    </div>
    <p class="footer-copy">
      &copy; 2025 The Global Antiquity Society. All rights reserved.
    </p>
  </footer>

  <!-- ============================
       MAIN SCRIPT
  ============================ -->
  <script>
    /*--------------------------------------------------------------
      PRELOADER LOGIC
    --------------------------------------------------------------*/
    window.addEventListener("load", () => {
      const preloader = document.getElementById("preloader");
      if (preloader) {
        preloader.style.display = "none";
      }
      // Fallback: Hide after 5s
      setTimeout(() => {
        if (preloader) preloader.style.display = "none";
      }, 5000);
    });

    /*--------------------------------------------------------------
      POPUP MODAL & MAP
    --------------------------------------------------------------*/
    gsap.registerPlugin(ScrollTrigger);

    document.addEventListener("DOMContentLoaded", () => {
      // 1. Show popup once page loads
      const popupOverlay = document.getElementById('popupOverlay');
      const closePopupBtn = document.getElementById('closePopup');
      if (popupOverlay) {
        popupOverlay.classList.add('active');
        closePopupBtn.addEventListener('click', () => {
          popupOverlay.classList.remove('active');
        });
      }

      // 2. Initialize Leaflet Map (if you keep the map)
      if (typeof L !== "undefined" && document.getElementById("map")) {
        const map = L.map("map").setView([26.4615, -80.0728], 13);
        L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png", {
          attribution:
            "&copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a>"
            + " contributors &copy; <a href='https://carto.com/'>CARTO</a>",
          subdomains: "abcd",
          maxZoom: 19,
        }).addTo(map);

        // Optional custom marker
        const customIcon = L.icon({
          iconUrl: "images/custom-marker.png", /* Replace with your marker image */
          iconSize: [38, 38],
          iconAnchor: [19, 38],
          popupAnchor: [0, -38],
        });
        // Example marker
        L.marker([26.4615, -80.0728], { icon: customIcon })
          .addTo(map)
          .bindPopup("<b>Community Event:</b> Beach Cleanup<br><b>Date:</b> Jan 15, 10 AM")
          .openPopup();

        // Move zoom controls if desired
        L.control.zoom({ position: "bottomright" }).addTo(map);

        // Keep map responsive
        window.addEventListener("resize", () => {
          map.invalidateSize();
        });
      }

      // 3. Book Scroll Animation
      gsap.set("#bookClosed", { opacity: 1 });
      gsap.set("#bookOpen", { opacity: 0 });
      gsap.set(".book-page", { opacity: 0, pointerEvents: "none" });

      const timeline = gsap.timeline({
        scrollTrigger: {
          trigger: "#pinnedBookSection",  // The black background container
          start: "top top",
          end: "+=200%",                 // how long the pinned effect lasts
          scrub: true,
          pin: true,                     // keep it pinned
          // markers: true,              // debug if needed
        }
      });

      // 1) Fade in closed book (already set to 1)
      // 2) Fade out closed book, fade in open book
      timeline
        .to("#bookClosed", { opacity: 0, duration: 1 }, "phase1")
        .to("#bookOpen", { opacity: 1, duration: 1 }, "phase1+=1");

      // 3) Reveal left & right pages
      timeline.to(".book-page", {
        opacity: 1,
        pointerEvents: "auto",
        duration: 1,
      }, "phase2");

      // 4) Fade out open book & pages (simulate closing)
      timeline.to("#bookOpen", { opacity: 0, duration: 1 }, "phase3")
        .to(".book-page", { opacity: 0, pointerEvents: "none", duration: 1 }, "phase3");

      // once timeline ends, pinned container unpins, revealing the about section
    });
  </script>
</body>
</html>
